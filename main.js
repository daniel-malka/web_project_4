!function(){var e={240:function(){console.log(11111,"!1111")}},t={};function s(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}!function(){"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class t{constructor(t,s,r){e(this,"_removeCard",(()=>this._cardElement.remove())),e(this,"_toggleHeart",(e=>{e.target.classList.toggle("button_liked")})),this._title=t.title,this._link=t.link,this._alt="Photo of ".concat(t.title),this._templateElement=s,this._handleCardClick=r}_setEventListeners(){this._deleteCard.addEventListener("click",(()=>this._removeCard())),this._likeCard.addEventListener("click",(e=>this._toggleHeart(e))),this._galleryImg.addEventListener("click",(()=>this._handleCardClick(this._title,this._link)))}createCard(){return this._cardElement=document.querySelector(this._templateElement).content.querySelector(".gallery__item").cloneNode(!0),this._galleryImg=this._cardElement.querySelector(".gallery__img"),this._galleryText=this._cardElement.querySelector(".desc__text"),this._deleteCard=this._cardElement.querySelector(".gallery__bin"),this._likeCard=this._cardElement.querySelector(".desc__heart"),this._galleryImg.src=this._link,this._galleryText.textContent=this._title,this._galleryImg.alt=this._alt,this._setEventListeners(),this._cardElement}}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i{constructor(e,t){r(this,"resetValidation",(()=>{this._hideAllErrors(),this._formElement.reset(),this._disableButton()})),r(this,"enableValidation",(()=>{this._formElement.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()})),r(this,"_setEventListeners",(()=>{this._allInputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButton(this._allInputs)}))}))})),r(this,"_hideAllErrors",(()=>{this._allInputs.forEach((e=>{this._hideInputError(e)}))})),r(this,"_disableButton",(()=>{const{buttonDisable:e}=this._settings;this._buttonEl.classList.add(e),this._buttonEl.disabled=!0})),r(this,"_showInputError",((e,t)=>{const{inputErrorClass:s,spanErrorClass:r}=this._settings;this._errorDynamicSpan=this._formElement.querySelector(".fieldset__error-type-".concat(e.id)),e.classList.add(s),this._errorDynamicSpan.textContent=t,this._errorDynamicSpan.classList.add(r)})),r(this,"_hideInputError",(e=>{const{inputErrorClass:t,spanErrorClass:s}=this._settings;this._errorDynamicSpan=this._formElement.querySelector(".fieldset__error-type-".concat(e.id)),e.classList.remove(t),this._errorDynamicSpan.classList.remove(s),this._errorDynamicSpan.textContent=""})),r(this,"_toggleButton",(e=>{const{buttonDisable:t}=this._settings;e.every((e=>e.validity.valid))?(this._buttonEl.classList.remove(t),this._buttonEl.disabled=!1):this._disableButton()})),r(this,"_checkInputValidity",(e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)})),this._settings=e,this._formElement=t,this._allInputs=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonEl=this._formElement.querySelector(this._settings.buttonSelector)}}function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class o{constructor(e){n(this,"_handleOverlay",(e=>{e.target.classList.contains("popup")&&this.close()})),n(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),this._popup=document.querySelector(e)}open(){this._popup.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popup.addEventListener("mousedown",this._handleOverlay),this._popup.querySelector(".popup__close").addEventListener("mousedown",(()=>this.close()))}}class l extends o{constructor(e,t){super(e),this._handleForm=t,this._form=this._popup.querySelector(".form"),this._inputs=Array.from(this._form.querySelectorAll(".fieldset__input"))}_getInputValues(){return this._values={},this._inputs.forEach((e=>{this._key=e.name,this._value=e.value,this._values[this._key]=this._value})),this._values}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._valuesFromForm=this._getInputValues(),this._handleForm(this._valuesFromForm),super.close()}))}setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}close(){super.close(),this._form.reset()}}const a=(document.forms.formProfile.elements.name,document.forms.formProfile.elements.occupation,document.querySelector(".text__edit")),c=document.querySelector(".top__plus-box"),_={inputSelector:".fieldset__input",buttonSelector:".fieldset__button",buttonDisable:"fieldset__button_disabled",inputErrorClass:"fieldset__input_error",spanErrorClass:"fieldset__error-message-active"},u=new(s(240).Api)({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"6efb715f-3f27-47aa-b11b-00d476bb80a2","Content-Type":"application/json"}});u.getUserInfo().then((e=>{console.log("res =>",e)})).catch(console.log("err ")),u.getCardsInfo().then((e=>console.log("res =>",e))).catch(console.log),u.editProfile();const h={formImg:"formImg",formProfile:"formProfile"},d=e=>{const s=(e=>new t(e,"#gallery__item",((e,t)=>{m.open(e,t)})).createCard())(e);y.addItem(s)};Array.from(document.querySelectorAll(".form")).forEach((e=>{const t=new i(_,e),s=e.getAttribute("name");h[s]=t,t.enableValidation()}));const p=new class{constructor(e){let{nameSelector:t,occupationSelector:s}=e;this._userName=document.querySelector(t),this._userOccupation=document.querySelector(s)}getUserInfo(){return{name:this._userName.textContent,occupation:this._userOccupation.textContent}}setUserInfo(e){this._userName.textContent=e.name,this._userOccupation.textContent=e.occupation}}({nameSelector:".text__name",occupationSelector:".text__occupation"}),m=new class extends o{open(e,t){this._image=this._popup.querySelector(".popup__img"),this._caption=this._popup.querySelector(".popup__caption"),this._caption.textContent=e,this._image.src=t,this._image.alt="Photo of ".concat(e),super.open()}}(".popup_type_zoom");m.setEventListeners();const f=new l(".popup_type_profile",(e=>{p.setUserInfo(e)}));f.setEventListeners();const E=new l(".popup_type_card",(e=>{d({title:e.title,link:e.link}),E.close()}));E.setEventListeners();const y=new class{constructor(e,t){this._renderer=e,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>{this.addItem(e,this._renderer(e))}))}addItem(){}}(d,".gallery");fetch("").then((e=>{y.renderItems(e),console.log("hixcsdcs")})),c.addEventListener("click",(()=>(h[formImg.getAttribute("name")].resetValidation(),void E.open()))),a.addEventListener("click",(()=>{var e;h[formProfile.getAttribute("name")].resetValidation(),e=p.getUserInfo(),f.setInputValues(e),f.open()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxDQUNEdEIsVUFBWSxHSGlHY0osRUQzR1IsWUM2R3BCMkIsTUFBTSxJQUFJbEMsTUFBTUMsSUFDZFMsRUFBUXFCLFlBQVk5QixHQUNwQnZILFFBQVFDLElBQUksV0FBWixJQU1GOEcsRUFBZ0JoRixpQkFBaUIsU0FBUyxLQTFEeEM0RixFQUFlQyxRQUFRUyxhQUFhLFNBQVNvQix1QkFDN0NULEVBQVl6RCxVQTJEZG1CLEVBQXNCM0UsaUJBQWlCLFNBQVMsS0FyRGhCLElBSkNuQixFQUsvQitHLEVBQWVmLFlBQVl5QixhQUFhLFNBQVNvQixrQkFMbEI3SSxFQU1YMkgsRUFBU2xCLGNBTDdCMEIsRUFBWXRDLGVBQWU3RixHQU8zQm1JLEVBQVl4RCxNQWtEYSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxpdGllcy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnNvbGUubG9nKDExMTExLCBcIiExMTExXCIpO1xyXG5cclxuY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICAgIHRoaXMuX3Rva2VuID0gdG9rZW47XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL3VzZXJzL2RhbmllbE1hbGthXCIsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IChyZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1c1RleHQpKSlcclxuICAgICAgLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBnZXRDYXJkc0luZm8oKSB7XHJcbiAgICBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvY2FyZHNcIiwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKChyZXMpID0+XHJcbiAgICAgIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChjb25zb2xlLmxvZyhyZXMuc3RhdHVzVGV4dCkpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCgpIHtcclxuICAgIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi9jYXJkc1wiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogXCJzb21lIHN0cmluZ1wiLCBsaW5rOiBcInd3dy5zb21lbGluay5jb21cIiB9KSxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT5cclxuICAgICAgcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGNvbnNvbGUubG9nKHJlcy5zdGF0dXNUZXh0KSlcclxuICAgICk7XHJcbiAgfVxyXG4gIGVkaXRQcm9maWxlKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi91c2Vycy9tZVwiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBcImFub3RoZXIgdXNlciBuYW1lXCIsXHJcbiAgICAgICAgYWJvdXQ6IFwiYW5vdGhlciBhYm91dFwiLFxyXG4gICAgICB9KSxcclxuICAgICAgLy8gYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAvLyAgIG5hbWU6IFwiTWFyaWUgU2vFgm9kb3dza2EgQ3VyaWVcIixcclxuICAgICAgLy8gICBhYm91dDogXCJQaHlzaWNpc3QgYW5kIENoZW1pc3RcIixcclxuICAgICAgLy8gfSksXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJcclxuZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcclxuICAgICh0aGlzLl90aXRsZSA9IGRhdGEudGl0bGUpLFxyXG4gICAgICAodGhpcy5fbGluayA9IGRhdGEubGluayksXHJcbiAgICAgICh0aGlzLl9hbHQgPSBgUGhvdG8gb2YgJHtkYXRhLnRpdGxlfWApO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVFbGVtZW50ID0gc2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgfVxyXG4gIF9yZW1vdmVDYXJkID0gKCkgPT4gdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgX3RvZ2dsZUhlYXJ0ID0gKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiYnV0dG9uX2xpa2VkXCIpO1xyXG4gIH07XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZGVsZXRlQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5fcmVtb3ZlQ2FyZCgpKTtcclxuICAgIHRoaXMuX2xpa2VDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB0aGlzLl90b2dnbGVIZWFydChldnQpKTtcclxuICAgIHRoaXMuX2dhbGxlcnlJbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl90aXRsZSwgdGhpcy5fbGluaylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZUVsZW1lbnQpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9faXRlbVwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHRoaXMuX2dhbGxlcnlJbWcgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2ltZ1wiKTtcclxuICAgIHRoaXMuX2dhbGxlcnlUZXh0ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZXNjX190ZXh0XCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQ2FyZCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fYmluXCIpO1xyXG4gICAgdGhpcy5fbGlrZUNhcmQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlc2NfX2hlYXJ0XCIpO1xyXG5cclxuICAgIHRoaXMuX2dhbGxlcnlJbWcuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2dhbGxlcnlUZXh0LnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XHJcbiAgICB0aGlzLl9nYWxsZXJ5SW1nLmFsdCA9IHRoaXMuX2FsdDtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2FsbElucHV0cyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25FbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3NldHRpbmdzLmJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuICByZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9oaWRlQWxsRXJyb3JzKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gIH07XHJcbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4gZXZ0LnByZXZlbnREZWZhdWx0KCkpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9O1xyXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHRoaXMuX2FsbElucHV0cy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uKHRoaXMuX2FsbElucHV0cyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICBfaGlkZUFsbEVycm9ycyA9ICgpID0+IHtcclxuICAgIHRoaXMuX2FsbElucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIF9kaXNhYmxlQnV0dG9uID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBidXR0b25EaXNhYmxlIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5hZGQoYnV0dG9uRGlzYWJsZSk7XHJcbiAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfTtcclxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgc3BhbkVycm9yQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgdGhpcy5fZXJyb3JEeW5hbWljU3BhbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuZmllbGRzZXRfX2Vycm9yLXR5cGUtJHtpbnB1dEVsLmlkfWBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQoaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yRHluYW1pY1NwYW4udGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICB0aGlzLl9lcnJvckR5bmFtaWNTcGFuLmNsYXNzTGlzdC5hZGQoc3BhbkVycm9yQ2xhc3MpO1xyXG4gIH07XHJcbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWwpID0+IHtcclxuICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBzcGFuRXJyb3JDbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9lcnJvckR5bmFtaWNTcGFuID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC5maWVsZHNldF9fZXJyb3ItdHlwZS0ke2lucHV0RWwuaWR9YFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZShpbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JEeW5hbWljU3Bhbi5jbGFzc0xpc3QucmVtb3ZlKHNwYW5FcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yRHluYW1pY1NwYW4udGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcbiAgX3RvZ2dsZUJ1dHRvbiA9IChpbnB1dHMpID0+IHtcclxuICAgIGNvbnN0IHsgYnV0dG9uRGlzYWJsZSB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICBjb25zdCBpc0lucHV0c1ZhbGlkID0gaW5wdXRzLmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQpO1xyXG5cclxuICAgIGlmIChpc0lucHV0c1ZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUoYnV0dG9uRGlzYWJsZSk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWwpID0+IHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsLCBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIF9oYW5kbGVPdmVybGF5ID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlblwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlblwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXkpO1xyXG4gICAgdGhpcy5fcG9wdXBcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXBcIjtcclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtID0gaGFuZGxlRm9ybTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5maWVsZHNldF9faW5wdXRcIikpO1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl92YWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fa2V5ID0gaW5wdXQubmFtZTtcclxuICAgICAgdGhpcy5fdmFsdWUgPSBpbnB1dC52YWx1ZTtcclxuICAgICAgdGhpcy5fdmFsdWVzW3RoaXMuX2tleV0gPSB0aGlzLl92YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcztcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3ZhbHVlc0Zyb21Gb3JtID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybSh0aGlzLl92YWx1ZXNGcm9tRm9ybSk7XHJcbiAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBnYWxsZXJ5V3JhcCA9IFwiLmdhbGxlcnlcIjtcclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gXCIucG9wdXBfdHlwZV9jYXJkXCI7XHJcbmNvbnN0IHByb2ZpbGVQb3B1cCA9IFwiLnBvcHVwX3R5cGVfcHJvZmlsZVwiO1xyXG5jb25zdCBvcGVuSW1nVmlldyA9IFwiLnBvcHVwX3R5cGVfem9vbVwiO1xyXG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5mb3Jtcy5mb3JtUHJvZmlsZS5lbGVtZW50cy5uYW1lO1xyXG5jb25zdCBvY2N1cGF0aW9uSW5wdXQgPSBkb2N1bWVudC5mb3Jtcy5mb3JtUHJvZmlsZS5lbGVtZW50cy5vY2N1cGF0aW9uO1xyXG5jb25zdCB0ZW1wbGF0ZVNlbGVjdG9yID0gXCIjZ2FsbGVyeV9faXRlbVwiO1xyXG5jb25zdCBzcGFuQXJyYXkgPSB7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi50ZXh0X19uYW1lXCIsXHJcbiAgb2NjdXBhdGlvblNlbGVjdG9yOiBcIi50ZXh0X19vY2N1cGF0aW9uXCIsXHJcbn07XHJcbmNvbnN0IG9wZW5Qcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGV4dF9fZWRpdFwiKTtcclxuY29uc3Qgb3BlbkltZ0FkZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b3BfX3BsdXMtYm94XCIpO1xyXG4vL3NldHRpbmdzXHJcbmNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZpZWxkc2V0X19pbnB1dFwiLFxyXG4gIGJ1dHRvblNlbGVjdG9yOiBcIi5maWVsZHNldF9fYnV0dG9uXCIsXHJcbiAgYnV0dG9uRGlzYWJsZTogXCJmaWVsZHNldF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZpZWxkc2V0X19pbnB1dF9lcnJvclwiLFxyXG4gIHNwYW5FcnJvckNsYXNzOiBcImZpZWxkc2V0X19lcnJvci1tZXNzYWdlLWFjdGl2ZVwiLFxyXG59O1xyXG5jb25zdCBpbml0aWFsR2FsbGVyeSA9IFtcclxuICB7XHJcbiAgICB0aXRsZTogXCJLZW5haSBGam9yZHMgaW50ZXJhdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MzM5Njc5MjAzNzYtMzNiMmQ5NGYwOTFmP2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz04NzAmcT04MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiWWVsbG93bGlua25lIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MDc1NTAyOTUyNjEtODUxZmE2MGQ4ZWQyP2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz04NzEmcT04MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiTmlhZ2FyYSBGYWxsc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU5ODQwMjQ1Mzg2MS00ZmJjYmY2Y2VkM2I/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE5NzQmcT04MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiWmlvbiBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTAyNzQ2NjYzMDg0LTE0YjU5YjY5MjRmMj9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9ODcwJnE9ODBcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIkthdWFpIGlzbGFuZHNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2Mzg0MDE2MDQ3NjUtNDdkYWFhNWE2YzM0P2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03ODEmcT04MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiR3JhbmQgQ2FueW9uXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTA5MzE2Nzg1Mjg5LTAyNWY1Yjg0NmIzNT9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9ODc2JnE9ODBcIixcclxuICB9LFxyXG5dO1xyXG5leHBvcnQge1xyXG4gIGdhbGxlcnlXcmFwLFxyXG4gIGFkZENhcmRQb3B1cCxcclxuICBwcm9maWxlUG9wdXAsXHJcbiAgb3BlbkltZ1ZpZXcsXHJcbiAgbmFtZUlucHV0LFxyXG4gIG9jY3VwYXRpb25JbnB1dCxcclxuICB0ZW1wbGF0ZVNlbGVjdG9yLFxyXG4gIHNwYW5BcnJheSxcclxuICBvcGVuUHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgb3BlbkltZ0FkZFBvcHVwLFxyXG4gIHNldHRpbmdzLFxyXG4gIGluaXRpYWxHYWxsZXJ5LFxyXG59O1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvclwiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuaW1wb3J0IHtcclxuICBnYWxsZXJ5V3JhcCxcclxuICBhZGRDYXJkUG9wdXAsXHJcbiAgcHJvZmlsZVBvcHVwLFxyXG4gIG9wZW5JbWdWaWV3LFxyXG4gIG5hbWVJbnB1dCxcclxuICBvY2N1cGF0aW9uSW5wdXQsXHJcbiAgdGVtcGxhdGVTZWxlY3RvcixcclxuICBzcGFuQXJyYXksXHJcbiAgb3BlblByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIG9wZW5JbWdBZGRQb3B1cCxcclxuICBzZXR0aW5ncyxcclxuICBpbml0aWFsR2FsbGVyeSxcclxufSBmcm9tIFwiLi4vdXRpbGl0aWVzL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIjtcclxuXHJcbi8vZnVuY3Rpb25zLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0zLWVuXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI2ZWZiNzE1Zi0zZjI3LTQ3YWEtYjExYi0wMGQ0NzZiYjgwYTJcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKFwicmVzID0+XCIsIHJlcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goY29uc29sZS5sb2coXCJlcnIgXCIpKTtcclxuYXBpXHJcbiAgLmdldENhcmRzSW5mbygpXHJcbiAgLnRoZW4oKHJlcykgPT4gY29uc29sZS5sb2coXCJyZXMgPT5cIiwgcmVzKSlcclxuICAuY2F0Y2goY29uc29sZS5sb2cpO1xyXG5hcGkuZWRpdFByb2ZpbGUoKTtcclxuXHJcbmNvbnN0IHN1Ym1pdGVQcm9maWxlRm9ybUlucHV0cyA9IChkYXRhKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XHJcbn07XHJcblxyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHsgZm9ybUltZzogXCJmb3JtSW1nXCIsIGZvcm1Qcm9maWxlOiBcImZvcm1Qcm9maWxlXCIgfTtcclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtXCIpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWwpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtRWwpO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWwuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcbmNvbnN0IHJlc2V0QW5kT3BlbkltZ0FkZEZvcm0gPSAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbZm9ybUltZy5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRDYXJkRm9ybS5vcGVuKCk7XHJcbn07XHJcbmNvbnN0IGhhbmRsZVByb2ZpbGVGb3JtSW5wdXRzID0gKGRhdGEpID0+IHtcclxuICBwcm9maWxlRm9ybS5zZXRJbnB1dFZhbHVlcyhkYXRhKTtcclxufTtcclxuXHJcbmNvbnN0IHJlc2V0QW5kT3BlblByb2ZpbGVGb3JtID0gKCkgPT4ge1xyXG4gIGZvcm1WYWxpZGF0b3JzW2Zvcm1Qcm9maWxlLmdldEF0dHJpYnV0ZShcIm5hbWVcIildLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNvbnN0IHByb2ZpbGVEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBoYW5kbGVQcm9maWxlRm9ybUlucHV0cyhwcm9maWxlRGF0YSk7XHJcbiAgcHJvZmlsZUZvcm0ub3BlbigpO1xyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsICh0aXRsZSwgbGluaykgPT4ge1xyXG4gICAgcG9wdXBXaXRoSW1hZ2Uub3Blbih0aXRsZSwgbGluayk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGNhcmQuY3JlYXRlQ2FyZCgpO1xyXG59O1xyXG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEpID0+IHtcclxuICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChkYXRhKTtcclxuICBzZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XHJcbn07XHJcbmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vY2xhc3Nlcy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhzcGFuQXJyYXkpO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uob3BlbkltZ1ZpZXcpO1xyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShwcm9maWxlUG9wdXAsIHN1Ym1pdGVQcm9maWxlRm9ybUlucHV0cyk7XHJcbnByb2ZpbGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBhZGRDYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKGFkZENhcmRQb3B1cCwgKGRhdGEpID0+IHtcclxuICByZW5kZXJDYXJkKFxyXG4gICAge1xyXG4gICAgICB0aXRsZTogZGF0YS50aXRsZSxcclxuICAgICAgbGluazogZGF0YS5saW5rLFxyXG4gICAgfSxcclxuICAgIGdhbGxlcnlXcmFwXHJcbiAgKTtcclxuICBhZGRDYXJkRm9ybS5jbG9zZSgpO1xyXG59KTtcclxuYWRkQ2FyZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihyZW5kZXJDYXJkLCBnYWxsZXJ5V3JhcCk7XHJcblxyXG5mZXRjaChcIlwiKS50aGVuKChyZXMpID0+IHtcclxuICBzZWN0aW9uLnJlbmRlckl0ZW1zKHJlcyk7XHJcbiAgY29uc29sZS5sb2coXCJoaXhjc2Rjc1wiKTtcclxufSk7XHJcblxyXG4vL2xpc3RlbmVycy8vLy8vLy8vLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5vcGVuSW1nQWRkUG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHJlc2V0QW5kT3BlbkltZ0FkZEZvcm0oKSk7XHJcblxyXG5vcGVuUHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICByZXNldEFuZE9wZW5Qcm9maWxlRm9ybSgpO1xyXG59KTtcclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgb2NjdXBhdGlvblNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlck9jY3VwYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9jY3VwYXRpb25TZWxlY3Rvcik7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIG9jY3VwYXRpb246IHRoaXMuX3VzZXJPY2N1cGF0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgKHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lKSxcclxuICAgICAgKHRoaXMuX3VzZXJPY2N1cGF0aW9uLnRleHRDb250ZW50ID0gZGF0YS5vY2N1cGF0aW9uKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgb3Blbih0aXRsZSwgbGluaykge1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWdcIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcclxuXHJcbiAgICAodGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IHRpdGxlKSxcclxuICAgICAgKHRoaXMuX2ltYWdlLnNyYyA9IGxpbmspLFxyXG4gICAgICAodGhpcy5faW1hZ2UuYWx0ID0gYFBob3RvIG9mICR7dGl0bGV9YCk7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5hZGRJdGVtKGl0ZW0sIHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBhZGRJdGVtKCkge31cclxufVxyXG4iXSwibmFtZXMiOlsiY29uc29sZSIsImxvZyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsInNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwidGhpcyIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl90aXRsZSIsInRpdGxlIiwiX2xpbmsiLCJsaW5rIiwiX2FsdCIsIl90ZW1wbGF0ZUVsZW1lbnQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2RlbGV0ZUNhcmQiLCJhZGRFdmVudExpc3RlbmVyIiwiX3JlbW92ZUNhcmQiLCJfbGlrZUNhcmQiLCJfdG9nZ2xlSGVhcnQiLCJfZ2FsbGVyeUltZyIsImNyZWF0ZUNhcmQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2dhbGxlcnlUZXh0Iiwic3JjIiwidGV4dENvbnRlbnQiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9oaWRlQWxsRXJyb3JzIiwiX2Zvcm1FbGVtZW50IiwicmVzZXQiLCJfZGlzYWJsZUJ1dHRvbiIsInByZXZlbnREZWZhdWx0IiwiX2FsbElucHV0cyIsImZvckVhY2giLCJpbnB1dEVsIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b24iLCJpbnB1dCIsIl9oaWRlSW5wdXRFcnJvciIsImJ1dHRvbkRpc2FibGUiLCJfc2V0dGluZ3MiLCJfYnV0dG9uRWwiLCJhZGQiLCJkaXNhYmxlZCIsImVycm9yTWVzc2FnZSIsImlucHV0RXJyb3JDbGFzcyIsInNwYW5FcnJvckNsYXNzIiwiX2Vycm9yRHluYW1pY1NwYW4iLCJpZCIsImlucHV0cyIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJidXR0b25TZWxlY3RvciIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImNvbnRhaW5zIiwiY2xvc2UiLCJrZXkiLCJfcG9wdXAiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZU92ZXJsYXkiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybSIsInN1cGVyIiwiX2hhbmRsZUZvcm0iLCJfZm9ybSIsIl9pbnB1dHMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfdmFsdWVzIiwiX2tleSIsIm5hbWUiLCJfdmFsdWUiLCJ2YWx1ZSIsIl92YWx1ZXNGcm9tRm9ybSIsInNldElucHV0VmFsdWVzIiwib3BlblByb2ZpbGVFZGl0QnV0dG9uIiwiZm9ybXMiLCJmb3JtUHJvZmlsZSIsImVsZW1lbnRzIiwib2NjdXBhdGlvbiIsIm9wZW5JbWdBZGRQb3B1cCIsImFwaSIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImdldFVzZXJJbmZvIiwidGhlbiIsInJlcyIsImNhdGNoIiwiZ2V0Q2FyZHNJbmZvIiwiZWRpdFByb2ZpbGUiLCJmb3JtVmFsaWRhdG9ycyIsImZvcm1JbWciLCJyZW5kZXJDYXJkIiwiY2FyZCIsInBvcHVwV2l0aEltYWdlIiwic2VjdGlvbiIsImFkZEl0ZW0iLCJmb3JtRWwiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsIm9jY3VwYXRpb25TZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VyT2NjdXBhdGlvbiIsInNldFVzZXJJbmZvIiwiX2ltYWdlIiwiX2NhcHRpb24iLCJwcm9maWxlRm9ybSIsImFkZENhcmRGb3JtIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwiaXRlbSIsImZldGNoIiwicmVzZXRWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==