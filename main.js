!function(){"use strict";function t(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class e{constructor(e,s,i){t(this,"_removeCard",(()=>this._cardElement.remove())),t(this,"_toggleHeart",(t=>{t.target.classList.toggle("button_liked")})),this._title=e.title,this._link=e.link,this._alt="Photo of ".concat(e.title),this._templateElement=s,this._handleCardClick=i}_setEventListeners(){this._deleteCard.addEventListener("click",(()=>this._removeCard())),this._likeCard.addEventListener("click",(t=>this._toggleHeart(t))),this._galleryImg.addEventListener("click",(()=>this._handleCardClick(this._title,this._link)))}createCard(){return this._cardElement=document.querySelector(this._templateElement).content.querySelector(".gallery__item").cloneNode(!0),this._galleryImg=this._cardElement.querySelector(".gallery__img"),this._galleryText=this._cardElement.querySelector(".desc__text"),this._deleteCard=this._cardElement.querySelector(".gallery__bin"),this._likeCard=this._cardElement.querySelector(".desc__heart"),this._galleryImg.src=this._link,this._galleryText.textContent=this._title,this._galleryImg.alt=this._alt,this._setEventListeners(),this._cardElement}}function s(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class i{constructor(t,e){s(this,"resetValidation",(()=>{this._hideAllErrors(),this._formElement.reset(),this._disableButton()})),s(this,"enableValidation",(()=>{this._formElement.addEventListener("submit",(t=>t.preventDefault())),this._setEventListeners()})),s(this,"_setEventListeners",(()=>{this._allInputs.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButton(this._allInputs)}))}))})),s(this,"_hideAllErrors",(()=>{this._allInputs.forEach((t=>{this._hideInputError(t)}))})),s(this,"_disableButton",(()=>{const{buttonDisable:t}=this._settings;this._buttonEl.classList.add(t),this._buttonEl.disabled=!0})),s(this,"_showInputError",((t,e)=>{const{inputErrorClass:s,spanErrorClass:i}=this._settings;this._errorDynamicSpan=this._formElement.querySelector(".fieldset__error-type-".concat(t.id)),t.classList.add(s),this._errorDynamicSpan.textContent=e,this._errorDynamicSpan.classList.add(i)})),s(this,"_hideInputError",(t=>{const{inputErrorClass:e,spanErrorClass:s}=this._settings;this._errorDynamicSpan=this._formElement.querySelector(".fieldset__error-type-".concat(t.id)),t.classList.remove(e),this._errorDynamicSpan.classList.remove(s),this._errorDynamicSpan.textContent=""})),s(this,"_toggleButton",(t=>{const{buttonDisable:e}=this._settings;t.every((t=>t.validity.valid))?(this._buttonEl.classList.remove(e),this._buttonEl.disabled=!1):this._disableButton()})),s(this,"_checkInputValidity",(t=>{t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)})),this._settings=t,this._formElement=e,this._allInputs=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonEl=this._formElement.querySelector(this._settings.buttonSelector)}}function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class n{constructor(t){r(this,"_handleOverlay",(t=>{t.target.classList.contains("popup")&&this.close()})),r(this,"_handleEscClose",(t=>{"Escape"===t.key&&this.close()})),this._popup=document.querySelector(t)}open(){this._popup.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popup.addEventListener("mousedown",this._handleOverlay),this._popup.querySelector(".popup__close").addEventListener("mousedown",(()=>this.close()))}}class o extends n{constructor(t,e){super(t),this._handleForm=e,this._form=this._popup.querySelector(".form"),this._inputs=Array.from(this._form.querySelectorAll(".fieldset__input"))}_getInputValues(){return this._values={},this._inputs.forEach((t=>{this._key=t.name,this._value=t.value,this._values[this._key]=this._value})),this._values}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{t.preventDefault(),this._valuesFromForm=this._getInputValues(),this._handleForm(this._valuesFromForm),super.close()}))}setInputValues(t){this._inputs.forEach((e=>{e.value=t[e.name]}))}close(){super.close(),this._form.reset()}}const l=(document.forms.formProfile.elements.name,document.forms.formProfile.elements.occupation,document.querySelector(".text__edit")),a=document.querySelector(".top__plus-box"),c={inputSelector:".fieldset__input",buttonSelector:".fieldset__button",buttonDisable:"fieldset__button_disabled",inputErrorClass:"fieldset__input_error",spanErrorClass:"fieldset__error-message-active"},u=[{title:"Kenai Fjords interational Park",link:"https://images.unsplash.com/photo-1633967920376-33b2d94f091f?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80"},{title:"Yellowlinkne National Park",link:"https://images.unsplash.com/photo-1607550295261-851fa60d8ed2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=871&q=80"},{title:"Niagara Falls",link:"https://images.unsplash.com/photo-1598402453861-4fbcbf6ced3b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80"},{title:"Zion National Park",link:"https://images.unsplash.com/photo-1502746663084-14b59b6924f2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80"},{title:"Kauai islands",link:"https://images.unsplash.com/photo-1638401604765-47daaa5a6c34?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=781&q=80"},{title:"Grand Canyon",link:"https://images.unsplash.com/photo-1509316785289-025f5b846b35?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=876&q=80"}];u.reverse();const _={formImg:"formImg",formProfile:"formProfile"},h=(t,s)=>{const i=(t=>new e(t,"#gallery__item",((t,e)=>{d.open(t,e)})).createCard())(t);b.addItem(i)};Array.from(document.querySelectorAll(".form")).forEach((t=>{const e=new i(c,t),s=t.getAttribute("name");_[s]=e,e.enableValidation()}));const p=new class{constructor(t){let{nameSelector:e,occupationSelector:s}=t;this._userName=document.querySelector(e),this._userOccupation=document.querySelector(s)}getUserInfo(){return{name:this._userName.textContent,occupation:this._userOccupation.textContent}}setUserInfo(t){this._userName.textContent=t.name,this._userOccupation.textContent=t.occupation}}({nameSelector:".text__name",occupationSelector:".text__occupation"}),d=new class extends n{open(t,e){this._image=this._popup.querySelector(".popup__img"),this._caption=this._popup.querySelector(".popup__caption"),this._caption.textContent=t,this._image.src=e,this._image.alt="Photo of ".concat(t),super.open()}}(".popup_type_zoom");d.setEventListeners();const m=new o(".popup_type_profile",(t=>{p.setUserInfo(t)}));m.setEventListeners();const f=new o(".popup_type_card",(t=>{h({title:t.title,link:t.link}),f.close()}));f.setEventListeners();const b=new class{constructor(t,e){let{items:s,renderer:i}=t;this._items=s,this._renderer=i,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this._renderer(t,this._container)}))}addItem(t){this._container.prepend(t)}}({items:u,renderer:h},".gallery");b.renderItems(),a.addEventListener("click",(()=>(_[formImg.getAttribute("name")].resetValidation(),void f.open()))),l.addEventListener("click",(()=>{var t;_[formProfile.getAttribute("name")].resetValidation(),t=p.getUserInfo(),m.setInputValues(t),m.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RGhCLElBSkNuQixFQUsvQnNHLEVBQWVOLFlBQVlpQixhQUFhLFNBQVN1QixrQkFMbEJ4SSxFQU1YbUgsRUFBU0ssY0FMN0JJLEVBQVkvQixlQUFlN0YsR0FPM0I0SCxFQUFZakQsTUFnRGEsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxpdGllcy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5leHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgc2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgKHRoaXMuX3RpdGxlID0gZGF0YS50aXRsZSksXHJcbiAgICAgICh0aGlzLl9saW5rID0gZGF0YS5saW5rKSxcclxuICAgICAgKHRoaXMuX2FsdCA9IGBQaG90byBvZiAke2RhdGEudGl0bGV9YCk7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZUVsZW1lbnQgPSBzZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcbiAgX3JlbW92ZUNhcmQgPSAoKSA9PiB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICBfdG9nZ2xlSGVhcnQgPSAoZXZ0KSA9PiB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJidXR0b25fbGlrZWRcIik7XHJcbiAgfTtcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9kZWxldGVDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9yZW1vdmVDYXJkKCkpO1xyXG4gICAgdGhpcy5fbGlrZUNhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHRoaXMuX3RvZ2dsZUhlYXJ0KGV2dCkpO1xyXG4gICAgdGhpcy5fZ2FsbGVyeUltZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX3RpdGxlLCB0aGlzLl9saW5rKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlRWxlbWVudClcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19pdGVtXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgdGhpcy5fZ2FsbGVyeUltZyA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9faW1nXCIpO1xyXG4gICAgdGhpcy5fZ2FsbGVyeVRleHQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlc2NfX3RleHRcIik7XHJcbiAgICB0aGlzLl9kZWxldGVDYXJkID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19iaW5cIik7XHJcbiAgICB0aGlzLl9saWtlQ2FyZCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVzY19faGVhcnRcIik7XHJcblxyXG4gICAgdGhpcy5fZ2FsbGVyeUltZy5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fZ2FsbGVyeVRleHQudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuX2dhbGxlcnlJbWcuYWx0ID0gdGhpcy5fYWx0O1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5fYWxsSW5wdXRzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc2V0dGluZ3MuYnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG4gIHJlc2V0VmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX2hpZGVBbGxFcnJvcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgfTtcclxuICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiBldnQucHJldmVudERlZmF1bHQoKSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH07XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fYWxsSW5wdXRzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b24odGhpcy5fYWxsSW5wdXRzKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIF9oaWRlQWxsRXJyb3JzID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fYWxsSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgX2Rpc2FibGVCdXR0b24gPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGJ1dHRvbkRpc2FibGUgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgdGhpcy5fYnV0dG9uRWwuY2xhc3NMaXN0LmFkZChidXR0b25EaXNhYmxlKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9O1xyXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsLCBlcnJvck1lc3NhZ2UpID0+IHtcclxuICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBzcGFuRXJyb3JDbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9lcnJvckR5bmFtaWNTcGFuID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC5maWVsZHNldF9fZXJyb3ItdHlwZS0ke2lucHV0RWwuaWR9YFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZChpbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JEeW5hbWljU3Bhbi50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIHRoaXMuX2Vycm9yRHluYW1pY1NwYW4uY2xhc3NMaXN0LmFkZChzcGFuRXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbCkgPT4ge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIHNwYW5FcnJvckNsYXNzIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgIHRoaXMuX2Vycm9yRHluYW1pY1NwYW4gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLmZpZWxkc2V0X19lcnJvci10eXBlLSR7aW5wdXRFbC5pZH1gXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvckR5bmFtaWNTcGFuLmNsYXNzTGlzdC5yZW1vdmUoc3BhbkVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JEeW5hbWljU3Bhbi50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfTtcclxuICBfdG9nZ2xlQnV0dG9uID0gKGlucHV0cykgPT4ge1xyXG4gICAgY29uc3QgeyBidXR0b25EaXNhYmxlIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgIGNvbnN0IGlzSW5wdXRzVmFsaWQgPSBpbnB1dHMuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCk7XHJcblxyXG4gICAgaWYgKGlzSW5wdXRzVmFsaWQpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZShidXR0b25EaXNhYmxlKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcclxuICAgIH1cclxuICB9O1xyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbCkgPT4ge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwsIGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcbiAgX2hhbmRsZU92ZXJsYXkgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheSk7XHJcbiAgICB0aGlzLl9wb3B1cFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm0gPSBoYW5kbGVGb3JtO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0cyA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZpZWxkc2V0X19pbnB1dFwiKSk7XHJcbiAgfVxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX3ZhbHVlcyA9IHt9O1xyXG5cclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9rZXkgPSBpbnB1dC5uYW1lO1xyXG4gICAgICB0aGlzLl92YWx1ZSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICB0aGlzLl92YWx1ZXNbdGhpcy5fa2V5XSA9IHRoaXMuX3ZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5fdmFsdWVzO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fdmFsdWVzRnJvbUZvcm0gPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtKHRoaXMuX3ZhbHVlc0Zyb21Gb3JtKTtcclxuICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGdhbGxlcnlXcmFwID0gXCIuZ2FsbGVyeVwiO1xyXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBcIi5wb3B1cF90eXBlX2NhcmRcIjtcclxuY29uc3QgcHJvZmlsZVBvcHVwID0gXCIucG9wdXBfdHlwZV9wcm9maWxlXCI7XHJcbmNvbnN0IG9wZW5JbWdWaWV3ID0gXCIucG9wdXBfdHlwZV96b29tXCI7XHJcbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmZvcm1zLmZvcm1Qcm9maWxlLmVsZW1lbnRzLm5hbWU7XHJcbmNvbnN0IG9jY3VwYXRpb25JbnB1dCA9IGRvY3VtZW50LmZvcm1zLmZvcm1Qcm9maWxlLmVsZW1lbnRzLm9jY3VwYXRpb247XHJcbmNvbnN0IHRlbXBsYXRlU2VsZWN0b3IgPSBcIiNnYWxsZXJ5X19pdGVtXCI7XHJcbmNvbnN0IHNwYW5BcnJheSA9IHtcclxuICBuYW1lU2VsZWN0b3I6IFwiLnRleHRfX25hbWVcIixcclxuICBvY2N1cGF0aW9uU2VsZWN0b3I6IFwiLnRleHRfX29jY3VwYXRpb25cIixcclxufTtcclxuY29uc3Qgb3BlblByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZXh0X19lZGl0XCIpO1xyXG5jb25zdCBvcGVuSW1nQWRkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvcF9fcGx1cy1ib3hcIik7XHJcbi8vc2V0dGluZ3NcclxuY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZmllbGRzZXRfX2lucHV0XCIsXHJcbiAgYnV0dG9uU2VsZWN0b3I6IFwiLmZpZWxkc2V0X19idXR0b25cIixcclxuICBidXR0b25EaXNhYmxlOiBcImZpZWxkc2V0X19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZmllbGRzZXRfX2lucHV0X2Vycm9yXCIsXHJcbiAgc3BhbkVycm9yQ2xhc3M6IFwiZmllbGRzZXRfX2Vycm9yLW1lc3NhZ2UtYWN0aXZlXCIsXHJcbn07XHJcbmNvbnN0IGluaXRpYWxHYWxsZXJ5ID0gW1xyXG4gIHtcclxuICAgIHRpdGxlOiBcIktlbmFpIEZqb3JkcyBpbnRlcmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYzMzk2NzkyMDM3Ni0zM2IyZDk0ZjA5MWY/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTg3MCZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJZZWxsb3dsaW5rbmUgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYwNzU1MDI5NTI2MS04NTFmYTYwZDhlZDI/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTg3MSZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJOaWFnYXJhIEZhbGxzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTk4NDAyNDUzODYxLTRmYmNiZjZjZWQzYj9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTk3NCZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJaaW9uIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDI3NDY2NjMwODQtMTRiNTliNjkyNGYyP2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz04NzAmcT04MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiS2F1YWkgaXNsYW5kc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYzODQwMTYwNDc2NS00N2RhYWE1YTZjMzQ/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc4MSZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJHcmFuZCBDYW55b25cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDkzMTY3ODUyODktMDI1ZjViODQ2YjM1P2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz04NzYmcT04MFwiLFxyXG4gIH0sXHJcbl07XHJcbmV4cG9ydCB7XHJcbiAgZ2FsbGVyeVdyYXAsXHJcbiAgYWRkQ2FyZFBvcHVwLFxyXG4gIHByb2ZpbGVQb3B1cCxcclxuICBvcGVuSW1nVmlldyxcclxuICBuYW1lSW5wdXQsXHJcbiAgb2NjdXBhdGlvbklucHV0LFxyXG4gIHRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgc3BhbkFycmF5LFxyXG4gIG9wZW5Qcm9maWxlRWRpdEJ1dHRvbixcclxuICBvcGVuSW1nQWRkUG9wdXAsXHJcbiAgc2V0dGluZ3MsXHJcbiAgaW5pdGlhbEdhbGxlcnksXHJcbn07XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xyXG5pbXBvcnQge1xyXG4gIGdhbGxlcnlXcmFwLFxyXG4gIGFkZENhcmRQb3B1cCxcclxuICBwcm9maWxlUG9wdXAsXHJcbiAgb3BlbkltZ1ZpZXcsXHJcbiAgbmFtZUlucHV0LFxyXG4gIG9jY3VwYXRpb25JbnB1dCxcclxuICB0ZW1wbGF0ZVNlbGVjdG9yLFxyXG4gIHNwYW5BcnJheSxcclxuICBvcGVuUHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgb3BlbkltZ0FkZFBvcHVwLFxyXG4gIHNldHRpbmdzLFxyXG4gIGluaXRpYWxHYWxsZXJ5LFxyXG59IGZyb20gXCIuLi91dGlsaXRpZXMvY29uc3RhbnRzXCI7XHJcbi8vZnVuY3Rpb25zLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuaW5pdGlhbEdhbGxlcnkucmV2ZXJzZSgpO1xyXG5cclxuY29uc3Qgc3VibWl0ZVByb2ZpbGVGb3JtSW5wdXRzID0gKGRhdGEpID0+IHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxufTtcclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0geyBmb3JtSW1nOiBcImZvcm1JbWdcIiwgZm9ybVByb2ZpbGU6IFwiZm9ybVByb2ZpbGVcIiB9O1xyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1cIikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1FbCk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuY29uc3QgcmVzZXRBbmRPcGVuSW1nQWRkRm9ybSA9ICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1tmb3JtSW1nLmdldEF0dHJpYnV0ZShcIm5hbWVcIildLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZENhcmRGb3JtLm9wZW4oKTtcclxufTtcclxuY29uc3QgaGFuZGxlUHJvZmlsZUZvcm1JbnB1dHMgPSAoZGF0YSkgPT4ge1xyXG4gIHByb2ZpbGVGb3JtLnNldElucHV0VmFsdWVzKGRhdGEpO1xyXG59O1xyXG5cclxuY29uc3QgcmVzZXRBbmRPcGVuUHJvZmlsZUZvcm0gPSAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbZm9ybVByb2ZpbGUuZ2V0QXR0cmlidXRlKFwibmFtZVwiKV0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY29uc3QgcHJvZmlsZURhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGhhbmRsZVByb2ZpbGVGb3JtSW5wdXRzKHByb2ZpbGVEYXRhKTtcclxuICBwcm9maWxlRm9ybS5vcGVuKCk7XHJcbn07XHJcblxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgdGVtcGxhdGVTZWxlY3RvciwgKHRpdGxlLCBsaW5rKSA9PiB7XHJcbiAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKHRpdGxlLCBsaW5rKTtcclxuICB9KTtcclxuICByZXR1cm4gY2FyZC5jcmVhdGVDYXJkKCk7XHJcbn07XHJcbmNvbnN0IHJlbmRlckNhcmQgPSAoZGF0YSwgY2FyZHNlbGVjdG9yKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoZGF0YSk7XHJcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xyXG59O1xyXG5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL2NsYXNzZXMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oc3BhbkFycmF5KTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKG9wZW5JbWdWaWV3KTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0ocHJvZmlsZVBvcHVwLCBzdWJtaXRlUHJvZmlsZUZvcm1JbnB1dHMpO1xyXG5wcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgYWRkQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShhZGRDYXJkUG9wdXAsIChkYXRhKSA9PiB7XHJcbiAgcmVuZGVyQ2FyZChcclxuICAgIHtcclxuICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXHJcbiAgICAgIGxpbms6IGRhdGEubGluayxcclxuICAgIH0sXHJcbiAgICBnYWxsZXJ5V3JhcFxyXG4gICk7XHJcbiAgYWRkQ2FyZEZvcm0uY2xvc2UoKTtcclxufSk7XHJcbmFkZENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgeyBpdGVtczogaW5pdGlhbEdhbGxlcnksIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXHJcbiAgZ2FsbGVyeVdyYXBcclxuKTtcclxuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4vL2xpc3RlbmVycy8vLy8vLy8vLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5vcGVuSW1nQWRkUG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHJlc2V0QW5kT3BlbkltZ0FkZEZvcm0oKSk7XHJcblxyXG5vcGVuUHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICByZXNldEFuZE9wZW5Qcm9maWxlRm9ybSgpO1xyXG59KTtcclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgb2NjdXBhdGlvblNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlck9jY3VwYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9jY3VwYXRpb25TZWxlY3Rvcik7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIG9jY3VwYXRpb246IHRoaXMuX3VzZXJPY2N1cGF0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgKHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lKSxcclxuICAgICAgKHRoaXMuX3VzZXJPY2N1cGF0aW9uLnRleHRDb250ZW50ID0gZGF0YS5vY2N1cGF0aW9uKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgb3Blbih0aXRsZSwgbGluaykge1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWdcIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcclxuXHJcbiAgICAodGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IHRpdGxlKSxcclxuICAgICAgKHRoaXMuX2ltYWdlLnNyYyA9IGxpbmspLFxyXG4gICAgICAodGhpcy5faW1hZ2UuYWx0ID0gYFBob3RvIG9mICR7dGl0bGV9YCk7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0sIHRoaXMuX2NvbnRhaW5lcik7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJzZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsInRoaXMiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJldnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfdGl0bGUiLCJ0aXRsZSIsIl9saW5rIiwibGluayIsIl9hbHQiLCJfdGVtcGxhdGVFbGVtZW50IiwiX2hhbmRsZUNhcmRDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9kZWxldGVDYXJkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9yZW1vdmVDYXJkIiwiX2xpa2VDYXJkIiwiX3RvZ2dsZUhlYXJ0IiwiX2dhbGxlcnlJbWciLCJjcmVhdGVDYXJkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9nYWxsZXJ5VGV4dCIsInNyYyIsInRleHRDb250ZW50IiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaGlkZUFsbEVycm9ycyIsIl9mb3JtRWxlbWVudCIsInJlc2V0IiwiX2Rpc2FibGVCdXR0b24iLCJwcmV2ZW50RGVmYXVsdCIsIl9hbGxJbnB1dHMiLCJmb3JFYWNoIiwiaW5wdXRFbCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uIiwiaW5wdXQiLCJfaGlkZUlucHV0RXJyb3IiLCJidXR0b25EaXNhYmxlIiwiX3NldHRpbmdzIiwiX2J1dHRvbkVsIiwiYWRkIiwiZGlzYWJsZWQiLCJlcnJvck1lc3NhZ2UiLCJpbnB1dEVycm9yQ2xhc3MiLCJzcGFuRXJyb3JDbGFzcyIsIl9lcnJvckR5bmFtaWNTcGFuIiwiaWQiLCJpbnB1dHMiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiYnV0dG9uU2VsZWN0b3IiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJjb250YWlucyIsImNsb3NlIiwia2V5IiwiX3BvcHVwIiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsIl9oYW5kbGVPdmVybGF5IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm0iLCJzdXBlciIsIl9oYW5kbGVGb3JtIiwiX2Zvcm0iLCJfaW5wdXRzIiwiX2dldElucHV0VmFsdWVzIiwiX3ZhbHVlcyIsIl9rZXkiLCJuYW1lIiwiX3ZhbHVlIiwidmFsdWUiLCJfdmFsdWVzRnJvbUZvcm0iLCJzZXRJbnB1dFZhbHVlcyIsIm9wZW5Qcm9maWxlRWRpdEJ1dHRvbiIsImZvcm1zIiwiZm9ybVByb2ZpbGUiLCJlbGVtZW50cyIsIm9jY3VwYXRpb24iLCJvcGVuSW1nQWRkUG9wdXAiLCJpbml0aWFsR2FsbGVyeSIsInJldmVyc2UiLCJmb3JtVmFsaWRhdG9ycyIsImZvcm1JbWciLCJyZW5kZXJDYXJkIiwiY2FyZHNlbGVjdG9yIiwiY2FyZCIsInBvcHVwV2l0aEltYWdlIiwic2VjdGlvbiIsImFkZEl0ZW0iLCJmb3JtRWwiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsIm9jY3VwYXRpb25TZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VyT2NjdXBhdGlvbiIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJfaW1hZ2UiLCJfY2FwdGlvbiIsInByb2ZpbGVGb3JtIiwiYWRkQ2FyZEZvcm0iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJyZXNldFZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9